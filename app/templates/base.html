<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Hospital Management System{% endblock %}</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"> {% block extra_css %}{% endblock %}
</head>

<body{% if request.endpoint=='auth.handle_login_request' %} class="login-page-override" {% endif %}>
    {% if current_user.is_authenticated and not request.endpoint == 'auth.handle_login_request' %}
    <nav class="main-navigation" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <a class="brand-link" href="{{ url_for('index') if current_user.is_authenticated else url_for('auth.handle_login_request') }}" aria-label="Home">
                <i class="bi bi-hospital" aria-hidden="true"></i> <span>HMS</span>
            </a>
            <button class="nav-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavMenu" aria-controls="mainNavMenu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="nav-toggle-icon"></span>
            </button>
            <div class="nav-menu-wrapper collapse" id="mainNavMenu">
                <ul class="nav-menu-primary" role="menubar">
                    {% if current_user.role.value == 'admin' %}
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('admin.display_admin_dashboard') }}" role="menuitem" aria-label="Administrator dashboard">
                            <i class="bi bi-speedometer2" aria-hidden="true"></i> <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('admin.list_all_physicians') }}" role="menuitem" aria-label="Manage physicians">
                            <i class="bi bi-person-badge" aria-hidden="true"></i> <span>Doctors</span>
                        </a>
                    </li>
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('admin.list_all_patients') }}" role="menuitem" aria-label="Manage patients">
                            <i class="bi bi-people" aria-hidden="true"></i> <span>Patients</span>
                        </a>
                    </li>
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('admin.list_all_appointments') }}" role="menuitem" aria-label="View appointments">
                            <i class="bi bi-calendar-check" aria-hidden="true"></i> <span>Appointments</span>
                        </a>
                    </li>
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('admin.perform_search') }}" role="menuitem" aria-label="Search functionality">
                            <i class="bi bi-search" aria-hidden="true"></i> <span>Search</span>
                        </a>
                    </li>
                    {% elif current_user.role.value == 'doctor' %}
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('doctor.display_physician_dashboard') }}" role="menuitem" aria-label="Physician dashboard">
                            <i class="bi bi-speedometer2" aria-hidden="true"></i> <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('doctor.list_physician_appointments') }}" role="menuitem" aria-label="My appointments">
                            <i class="bi bi-calendar-check" aria-hidden="true"></i> <span>My Appointments</span>
                        </a>
                    </li>
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('doctor.list_assigned_patients') }}" role="menuitem" aria-label="My patients">
                            <i class="bi bi-people" aria-hidden="true"></i> <span>My Patients</span>
                        </a>
                    </li>
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('doctor.manage_availability') }}" role="menuitem" aria-label="Set availability">
                            <i class="bi bi-clock" aria-hidden="true"></i> <span>Availability</span>
                        </a>
                    </li>
                    {% elif current_user.role.value == 'patient' %}
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('patient.display_client_dashboard') }}" role="menuitem" aria-label="Patient dashboard">
                            <i class="bi bi-speedometer2" aria-hidden="true"></i> <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('patient.search_physicians') }}" role="menuitem" aria-label="Find physicians">
                            <i class="bi bi-search" aria-hidden="true"></i> <span>Search Doctors</span>
                        </a>
                    </li>
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('patient.create_appointment') }}" role="menuitem" aria-label="Schedule appointment">
                            <i class="bi bi-calendar-plus" aria-hidden="true"></i> <span>Book Appointment</span>
                        </a>
                    </li>
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('patient.list_client_appointments') }}" role="menuitem" aria-label="My appointments">
                            <i class="bi bi-calendar-check" aria-hidden="true"></i> <span>My Appointments</span>
                        </a>
                    </li>
                    <li class="nav-menu-item" role="none">
                        <a class="nav-menu-link" href="{{ url_for('patient.view_treatment_history') }}" role="menuitem" aria-label="Treatment history">
                            <i class="bi bi-clock-history" aria-hidden="true"></i> <span>History</span>
                        </a>
                    </li>
                    {% endif %}
                </ul>
                <ul class="nav-menu-secondary" role="menubar">
                    <li class="nav-menu-item dropdown" role="none">
                        <a class="nav-menu-link dropdown-toggle" href="#" id="userMenuDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="User menu">
                            <i class="bi bi-person-circle" aria-hidden="true"></i> <span>{{ current_user.name }}</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenuDropdown" role="menu">
                            {% if current_user.role.value == 'patient' %}
                            <li role="none">
                                <a class="dropdown-item" href="{{ url_for('patient.update_client_profile') }}" role="menuitem">
                                    <i class="bi bi-person" aria-hidden="true"></i> <span>Profile</span>
                                </a>
                            </li>
                            {% else %}
                            <li role="none">
                                <a class="dropdown-item" href="{{ url_for('auth.display_user_profile') }}" role="menuitem">
                                    <i class="bi bi-person" aria-hidden="true"></i> <span>Profile</span>
                                </a>
                            </li>
                            {% endif %}
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li role="none">
                                <a class="dropdown-item text-danger" href="{{ url_for('auth.handle_logout_request') }}" role="menuitem">
                                    <i class="bi bi-box-arrow-right" aria-hidden="true"></i> <span>Logout</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    {% endif %} {% if request.endpoint != 'auth.handle_login_request' %} {% with messages = get_flashed_messages(with_categories=true) %} {% if messages %}
    <div class="{% if current_user.is_authenticated %}container-fluid{% else %}container{% endif %} message-container" role="alert" aria-live="polite">
        {% for category, message in messages %}
        <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close notification"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %} {% endwith %} {% endif %} {% block content_wrapper %}
    <main class="{% if current_user.is_authenticated %}container-fluid mt-4{% else %}{% endif %}" role="main">
        {% block content %}{% endblock %}
    </main>
    {% endblock %} {% if request.endpoint != 'auth.handle_login_request' %}
    <footer class="page-footer" role="contentinfo">
        <div class="container">
            <p class="footer-text">&copy; 2024 Hospital Management System. All rights reserved.</p>
        </div>
    </footer>
    {% endif %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% block extra_js %}{% endblock %}
    </body>

</html>